{% extends 'base.html.twig' %}

{% block title %}Recherche de film{% endblock %}

{% block content %}
<h1>Recherche film</h1>

{{form(form, {attr: {id: "searchForm"}})}}


<div id="messageBox"></div>
<div id="resultWrapper"></div>

{% endblock %}


{% block js %}
    <script>
        $(function() {

            $('#form_submit').click(function(e) {
                e.preventDefault();

                let data = $('#searchForm').serialize(); // serialize : mettre en chaine de charact√®res
                // let data = new FormData(form.serialize());
                // console.log(data);

                $.ajax({
                    url: '/film/search/response',
                    data: data,
                    type: 'post',
                    dataType: 'json',
                    beforeSend: function(){
                        $('#messageBox').html('<b>... chargement ...</b>');
                    },
                    success: function(json){ // si code html 200
                        let html = json.view;
                        $('#resultWrapper').html(html);
                        $('#messageBox').html('');
                    },
                    error: function(a,z,e){ // si code html 404, 401, ...
           
                    }
                })
            })

        });
    </script>
  {% endblock %}
